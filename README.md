# テキストエディタ風 ToDo アプリ

テキストエディタのような操作感をプレーン JavaScript で実装した Todo 管理 Web アプリケーション。  
インライン編集、スラッシュコマンド、キーボード操作のみで完結するシンプルなブロックエディタ。

## ✨ 主な機能

### 📝 複数のブロックタイプ
- **テキスト**: 通常のテキスト行
- **チェックボックス**: `/c` で変換。チェックで削除線＋淡色化。Enter で次行も自動的にチェックボックス
- **リスト（箇条書き）**: `/−` で変換。Enter で次行も自動的にリスト継続
- **見出し**: `/h` で変換。太字表示。直下に水平線を自動挿入
- **水平線**: `/_` で変換。編集不可の区切り線

### 🎯 操作方法

#### スラッシュコマンド
- `/c` → チェックボックス（タスク）
- `/-` → リスト（箇条書き）
- `/_` → 水平線
- `/h` → 見出し（直下に水平線を自動挿入）

#### インライン編集
- 行クリックで編集開始
- `Enter` で確定して次の行へ（チェックボックス・リストは同じ形式で継続）
- `Shift+Enter` で同一行内改行
- `Esc` でキャンセル
- 空行で `Backspace` または `Delete` → リスト/チェックボックスを通常テキストに変換、テキスト行は削除

#### キーボード移動
- `↑` / `↓` で上下行へフォーカス移動
- キーボードのみですべての操作が可能

### 🎨 コンパクトな UI
- 行高: 30px
- フォント: 13px（見出しも同じサイズで太字）
- 完了タスク: 削除線＋フェード
- ホバーで削除ボタン表示
- **ドラッグハンドルなし**: 並び替えは行わない（入力順で表示）
- 1280×720 で 15-20 行以上がスクロール無しで表示可能

### ♿ アクセシビリティ
- `tabindex` / `aria` 属性対応
- キーボード操作完全対応
- スクリーンリーダー対応

### 💾 データ保存
- SQLite3 (PDO なし) に自動保存
- ページリロード後も内容、並び、階層、チェック状態を保持
- PHP ビルトインサーバーで動作

## 🚀 使い方

1. このフォルダで PHP ビルトインサーバーを起動:
   ```bash
   php -S localhost:8000
   ```

2. ブラウザで http://localhost:8000 を開く

3. 基本操作:
   - テキストを入力して `Enter` で行追加
   - `/c` でチェックボックス、`/-` でリスト、`/_` で水平線、`/h` で見出しに変換
   - チェックボックスで完了/未完了を切り替え
   - 空行で `Backspace` でブロックタイプを解除または削除
   - `↑`/`↓` キーで行間を移動
   - `×` ボタンで削除

## 🪟 付箋風の小ウィンドウ化（Windows）
- Chrome/Edge: 右上メニュー → 「保存と共有」→「ショートカットを作成」→「ウィンドウとして開く」

## 📁 構成
- `index.html` : UI 構造
- `style.css`  : コンパクトデザインのスタイル
- `script.js`  : フロントロジック（contenteditable、スラッシュコマンド、APIコール）
- `api.php`    : CRUD API（SQLite3, PDOなし）
- `fonts/`     : Noto Sans JP フォント
- `todo.db`    : 初回アクセス時に自動生成（.gitignore 対象）

## 💡 技術スタック
- **編集**: contenteditable とキーハンドリング
- **保存**: SQLite3（PDO なし）経由の API
- **データ構造**: `{ id, type, text, checked, order }`
  - `type`: 'text' | 'checkbox' | 'list' | 'hr' | 'heading'
  - フラットな構造（階層なし）

## 🗄️ データベース
既存のデータベースは自動的にマイグレーションされます。
- `type`: ブロックの種類（text/checkbox/list/hr/heading）
- `sort_order`: 並び順（入力順）
