# テキストエディター風 ToDo アプリ

テキストエディター的な操作感を基本に、アウトライン風のコンパクトUIで多情報表示する Web ToDo アプリケーション。  
インライン編集、スラッシュコマンド、キーボード操作のみで完結する Notion 風 UI を実装。

## ✨ 主な機能

### 📝 ブロックタイプ
- **テキスト (text)**: 通常のテキスト行
- **チェックボックス (checkbox)**: タスク管理用。チェックで削除線＋淡色化
- **リスト (list)**: 箇条書き項目（•付き）
- **水平線 (hr)**: 区切り線（編集不可）
- **見出し (heading)**: 太字見出し

### 🎯 操作方法

#### スラッシュコマンド
行の先頭で以下のコマンドを入力すると、行のタイプを変換できます：

- `/c` → チェックボックス
- `/-` → リスト（箇条書き）
- `/_` → 水平線
- `/h` → 見出し（直下に水平線を自動挿入）

#### キーボード操作
- `Enter`: 行を確定し、次行を生成
  - チェックボックス → 次行もチェックボックス
  - リスト → 次行もリスト
  - 見出し・テキスト → 次行はテキスト
- `Shift+Enter`: 同一行で改行（行タイプは維持）
- `Backspace`/`Delete`（空行時）:
  - リスト → テキストに変換
  - チェックボックス → テキストに変換
  - テキスト → 行を削除
- `↑`/`↓`: 上下行へフォーカス移動
- `Esc`: 編集をキャンセル
- `Ctrl+Z`/`Cmd+Z`: 削除の復元（1ステップ）

#### インライン編集
- 行クリックで編集開始
- 未確定で他行に移動時は自動確定
- チェック済みのタスクは編集不可

### 🎨 コンパクトな UI
- 行高: 30px
- フォント: 13px（見出し 15px）
- チェック済みタスク: 削除線＋フェード
- ホバーで削除ボタン表示
- ドラッグハンドルなし（並び替えUIなし）

### ♿ アクセシビリティ
- `tabindex` / `aria` 属性対応
- キーボード操作完全対応
- スクリーンリーダー対応

### 💾 データ保存
- SQLite3 に自動保存
- ページリロード後も内容、行タイプ、チェック状態、順序を保持
- PHP ビルトインサーバーで動作

## 🚀 使い方

1. このフォルダで PHP ビルトインサーバーを起動:
   ```bash
   php -S localhost:8000
   ```

2. ブラウザで http://localhost:8000 を開く

3. 基本操作:
   - テキストを入力して `Enter` で行追加
   - `/c` でチェックボックス、`/-` でリスト、`/_` で水平線、`/h` で見出しを作成
   - チェックボックスで完了/未完了を切り替え
   - `×` ボタンで削除
   - `Enter` で同じタイプの行を続けて作成
   - 空行で `Backspace` を押すと、リスト/チェックボックスはテキストに変換

## 🪟 付箋風の小ウィンドウ化（Windows）
- Chrome/Edge: 右上メニュー → 「保存と共有」→「ショートカットを作成」→「ウィンドウとして開く」

## 📁 構成
- `index.html` : UI 構造
- `style.css`  : コンパクトデザインのスタイル
- `script.js`  : フロントロジック（contenteditable、スラッシュコマンド、APIコール）
- `api.php`    : CRUD + 並び替え API（SQLite3）
- `fonts/`     : Noto Sans JP フォント
- `todo.db`    : 初回アクセス時に自動生成（.gitignore 対象）

## 💡 技術スタック
- **編集**: contenteditable とキーハンドリング
- **保存**: SQLite3 経由の API
- **データ構造**: `{ id, type, text, checked, order }`
  - `type`: 'text' | 'checkbox' | 'list' | 'hr' | 'heading'
  - `order`: 入力順（ソートキー）

## 🗄️ データベース
既存のデータベースは自動的にマイグレーションされます。
- `type`: アイテムの種類（text/checkbox/list/hr/heading）
- `sort_order`: 並び順
- `done`: チェック状態（checkbox のみ）
